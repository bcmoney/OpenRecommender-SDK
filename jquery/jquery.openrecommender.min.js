(function($){$.fn.OpenRecommender=function(config){var defaults={url:'recommendations.xml',format:'xml',thumbnail_width:'75',thumbnail_height:'50',container:'#content article'};var config=$.extend(defaults,config);if(config.format.toLowerCase()=='xml'){$.ajax({url:config.url,dataType:config.format,success:function(xml){getRecommendations(xml)},error:function(){$.error('Error in AJAX request')}})}else{$.getJSON(config.url,function(json){getRecommendations(json)})}getRecommendations=function(responseData){$(config.container).append('<ol>');if(config.format.toLowerCase()=="xml"){$(responseData).find('recommendation').each(function(i,recommendation){$(config.container).append('<li class="'+((i%2==0)?'even':'odd')+'">'+'<a id="recommendation_'+getRecommendationIdentifier(recommendation)+'" href="'+getRecommendationLink(recommendation)+'" title="'+getRecommendationDescription(recommendation)+'">'+'<img src="'+getRecommendationImage(recommendation)+'" width="'+config.thumbnail_width+'" height="'+config.thumbnail_height+'" />'+getRecommendationTitle(recommendation)+'</a></li>')})}else{$.each(responseData.recommendations.recommendation,function(i,recommendation){$(config.container).append('<li class="'+((i%2==0)?'even':'odd')+'">'+'<a id="recommendation_'+getRecommendationIdentifier(recommendation)+'" href="'+getRecommendationLink(recommendation)+'" title="'+getRecommendationDescription(recommendation)+'">'+'<img src="'+getRecommendationImage(recommendation)+'" width="'+config.thumbnail_width+'" height="'+config.thumbnail_height+'" />'+getRecommendationTitle(recommendation)+'</a></li>')})}$(config.container).append('</ol>')}getRecommendationIdentifier=function(recommendation){return(config.format.toLowerCase()=="xml")?$(recommendation).attr('identifier'):recommendation.identifier},getRecommendationTitle=function(recommendation){return(config.format.toLowerCase()=="xml")?$(recommendation).find("title").text():recommendation.title.data},getRecommendationImage=function(recommendation){return(config.format.toLowerCase()=="xml")?$(recommendation).find("image").text():recommendation.image.data},getRecommendationLink=function(recommendation){return(config.format.toLowerCase()=="xml")?$(recommendation).find("link").text():recommendation.link.data},getRecommendationDescription=function(recommendation){return(config.format.toLowerCase()=="xml")?$(recommendation).find("description").text():recommendation.description.data}}})(jQuery);